<div class="row">
<h1>Map of Singapore Buslines</h1>
<%= content_tag "div", id: "features", data: {features: @features } do %> <% end %>
<%= content_tag "div", id: "lines", data: {lines: @lines_json } do %> <% end %>

<div class="col-md-4" ng-controller="BusCtrl">
  <div class="row" style="padding-bottom:10px">
        <label for="query" class="col-xs-4 control-label">Filter list:</label>
        <input ng-model="query" class="col-xs-4">

        <select size="20" multiple class="form-control col-xs-4" >
          <option ng-click="displayBusline(line.busnumber)" ng-repeat="line in lines | filter:query">{{line.busnumber}}</option>
        </select>
  </div>

  <div class="row" style="padding-bottom:10px">
    <b>Search nearby buslines by:</b>
    <form name="searchForm" class="form-horizontal">
  
    <div class="form-group">
        <label for="coords" class="col-xs-4 control-label">Coordinates:</label>
        <div class="col-xs-4">
            <input ng-model="search.lat" type="text" class="form-control" placeholder="1.31"/>
        </div>
        <div class="col-xs-4">
            <input ng-model="search.long" type="text" class="form-control" placeholder="103.9"/>
        </div>
    </div>

    <div class="form-group">
        <label for="zip" class="col-xs-4 control-label">Zip code:</label>
        <div class="col-xs-4">
            <input ng-model="search.zip" type="text" class="form-control col-xs-4" name="zip" placeholder="zip"/>
        </div>
    </div>
    <div class="form-group">
        <label for="busstopid" class="col-xs-4 control-label">Busstop code:</label>
        <div class="col-xs-4">
            <input ng-model="search.stopid" type="text" class="form-control col-xs-4" name="busstopid" placeholder="busstop code"/>
        </div>
    </div>
    <div class="form-group">
        <label for="dist" class="col-xs-4 control-label">Distance:</label>
        <div class="col-xs-4">
            <input ng-model="search.dist" type="text" class="form-control col-xs-4" name="busstopid" placeholder="max distance in m"/>
        </div>
    </div>
    <button ng-click="searchBuslines(search)" type="submit" class="btn btn-default btn-sm btn-primary">Search</button>
    <button ng-click="resetForm(search)" type="submit" class="btn btn-default btn-sm btn-primary">Reset</button>
    </form> 
  </div>

  <div class="row">
  <a ng-click="clearMap()" class="btn btn-default btn-sm btn-primary" href="#" role="button">Clear map</a>
  </div>

</div>

<div class="col-md-8">
  <div id="map"></div>
</div>

</div>
